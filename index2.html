<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ø­Ø¨Ø§Ø¨ Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø± â€” GitHub JSON</title>
<style>
body { font-family: Tahoma; direction: rtl; padding: 20px; background: #f5f5f5; }
button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
.result { margin-top: 15px; font-size: 18px; font-weight: bold; }
.buy { color: green; }
.sell { color: red; }
</style>
</head>
<body>

<h2>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± Ø­Ø¨Ø§Ø¨ Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø± â€” GitHub JSON</h2>
<button onclick="calc()">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ùˆ Ù…Ø­Ø§Ø³Ø¨Ù‡</button>

<div id="out" class="result">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±...</div>

<script>
async function calc() {
    let out = document.getElementById('out');
    out.innerHTML = "Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§... â³";

    try {
        // --- Ù„ÛŒÙ†Ú© ÙØ§ÛŒÙ„ JSON Ø±ÙˆÛŒ GitHub Pages ---
        let data = await fetch("https://USERNAME.github.io/REPO/data.json")
            .then(res => res.json());

        let usd = data.usd;
        let goldMarket = data.goldMarket;
        let ounce = data.ounce;

        // --- Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù†Ø¸Ø±ÛŒ Ú¯Ø±Ù… 18 Ø¹ÛŒØ§Ø± ---
        let theoretical = ((ounce * usd * 0.999) / 31.1035) * 0.75;

        // --- Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¨Ø§Ø¨ ---
        let bubble = goldMarket - theoretical;

        // --- ØªØ´Ø®ÛŒØµ Ø®Ø±ÛŒØ¯ / ÙØ±ÙˆØ´ ---
        let status = "";
        if (bubble < 0) status = "<span class='buy'>ğŸ’š Ø²Ù…Ø§Ù† Ø®Ø±ÛŒØ¯</span>";
        else if (bubble > 0) status = "<span class='sell'>ğŸ’” Ø²Ù…Ø§Ù† ÙØ±ÙˆØ´</span>";
        else status = "âš– Ù…ØªØ¹Ø§Ø¯Ù„";

        // --- Ù†Ù…Ø§ÛŒØ´ Ø®Ø±ÙˆØ¬ÛŒ ---
        out.innerHTML = `
            ğŸ’µ Ø¯Ù„Ø§Ø±: ${usd.toLocaleString()} ØªÙˆÙ…Ø§Ù†<br>
            ğŸŸ¡ Ø§ÙˆÙ†Ø³ Ø¬Ù‡Ø§Ù†ÛŒ: ${ounce.toLocaleString()} Ø¯Ù„Ø§Ø±<br>
            ğŸŸ¨ Ø·Ù„Ø§ Û±Û¸ Ø¹ÛŒØ§Ø± Ø¨Ø§Ø²Ø§Ø±: ${goldMarket.toLocaleString()} ØªÙˆÙ…Ø§Ù†<br><br>
            ğŸ“˜ Ù‚ÛŒÙ…Øª Ù†Ø¸Ø±ÛŒ: ${theoretical.toLocaleString()} ØªÙˆÙ…Ø§Ù†<br>
            ğŸ“™ Ù…Ù‚Ø¯Ø§Ø± Ø­Ø¨Ø§Ø¨: ${bubble.toLocaleString()} ØªÙˆÙ…Ø§Ù†<br><br>
            Ù†ØªÛŒØ¬Ù‡: ${status}
        `;

    } catch (err) {
        out.innerHTML = "âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§: " + err;
    }
}
</script>

</body>
</html>
